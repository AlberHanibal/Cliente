<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Alumnos</title>
    <style>
        .red {
            color: red;
        }
        td, th {
            border: 1px solid blue;
        }

        table {
            border: 2px dotted black;
        }
    </style>
    <script>
        // se está modificando siempre el array Alumnos, las variables van clonando el puntero del array Alumnos
        // porque son objetos
        addEventListener("load", function () {
            var alumno = [
                {
                    nombre: 'Alberto',
                    apellido: 'Colmenar',
                    nota: Math.floor(Math.random() * 10 + 1)
                },
                {
                    nombre: 'qasd',
                    apellido: 'xcvxc',
                    nota: Math.floor(Math.random() * 10 + 1)
                },
                {
                    nombre: 'tyhthy',
                    apellido: 'loiik',
                    nota: Math.floor(Math.random() * 10 + 1)
                },
                {
                    nombre: 'aklsd',
                    apellido: 'erbebe',
                    nota: Math.floor(Math.random() * 10 + 1)
                },
                {
                    nombre: 'Sandra',
                    apellido: 'San Román',
                    nota: Math.floor(Math.random() * 10 + 1)
                },
                {
                    nombre: 'Andrés',
                    apellido: 'Armesto',
                    nota: Math.floor(Math.random() * 10 + 1)
                }
            ]
            function imprimirTabla(alumno, descripcion) {
                let nodoTabla = document.createElement("TABLE");
                document.getElementsByTagName("body")[0].appendChild(nodoTabla);

                let nodoCaption = document.createElement("CAPTION");
                nodoCaption.textContent = descripcion;
                nodoTabla.appendChild(nodoCaption);

                let nodoTr = document.createElement("TR");
                let nodoThNombre = document.createElement("TD");
                nodoThNombre.textContent = "Nombre";
                let nodoThApellidos = document.createElement("TD");
                nodoThApellidos.textContent = "Apellidos";
                let nodoThNota = document.createElement("TD");
                nodoThNota.textContent = "Nota";
                nodoTr.appendChild(nodoThNombre);
                nodoTr.appendChild(nodoThApellidos);
                nodoTr.appendChild(nodoThNota);
                nodoTabla.appendChild(nodoTr);

                alumno.forEach(a => {
                    var nodoTrAlumno = document.createElement("TR");
                    let nodoTdNombre = document.createElement("TD");
                    nodoTdNombre.textContent = a.nombre;
                    let nodoTdApellidos = document.createElement("TD");
                    nodoTdApellidos.textContent = a.apellido;
                    let nodoTdNota = document.createElement("TD");
                    nodoTdNota.textContent = a.nota;
                    if (a.nota < 5) {
                        nodoTdNota.setAttribute("class", "red");
                    }
                    nodoTrAlumno.appendChild(nodoTdNombre);
                    nodoTrAlumno.appendChild(nodoTdApellidos);
                    nodoTrAlumno.appendChild(nodoTdNota);
                    nodoTabla.appendChild(nodoTrAlumno);
                });
            }
            imprimirTabla(alumno, "Sin tratar");

            let alumnoOrdenadoNota = alumno;
            alumnoOrdenadoNota.sort((a, b) => {
                if (a.nota > b.nota) {
                    return -1;
                } else if (a.nota < b.nota) {
                    return 1;
                } else
                    return 0;
            });
            imprimirTabla(alumnoOrdenadoNota, "Ordenado por nota");

            let alumnoOrdenadoApellidos = alumno;
            alumno.sort((a, b) => {
                if (a.apellido > b.apellido) {
                    return 1;
                } else if (a.apellido < b.apellido) {
                    return -1;
                } else
                    return 0;
            });
            imprimirTabla(alumnoOrdenadoApellidos, "Ordenado por apellido");

            let alumnoMayusculas = alumno;
            alumno.map(a => {
                a.nombre = a.nombre.toUpperCase();
                a.apellido = a.apellido.toUpperCase();
            });
            imprimirTabla(alumnoMayusculas, "Todo mayúsculas");

            let alumnoAprobados = alumno.filter(a => a.nota >= 5);
            imprimirTabla(alumnoAprobados, "Borrados los suspensos");
        });
    </script>
</head>

<body>
    <h1>Tablas Alumnos</h1>

</body>

</html>